import base64
code="CmltcG9ydCBweW1vbmdvCmltcG9ydCByYW5kb20KaW1wb3J0IHJlCmltcG9ydCBzdHJpbmcKaW1wb3J0IHN5cwppbXBvcnQgZ2V0b3B0CmltcG9ydCBwcHJpbnQKCiMgQ29weXJpZ2h0IDIwMTIKIyAxMGdlbiwgSW5jLgojIEF1dGhvcjogQW5kcmV3IEVybGljaHNvbiAgIGFqZUAxMGdlbi5jb20KIwojIElmIHlvdSBhcmUgYSBzdHVkZW50IGFuZCByZWFkaW5nIHRoaXMgY29kZSwgdHVybiBiYWNrIG5vdywgYmVmb3JlCiMgdGhlIE1vbmdvREIgZ29kcyBzbWl0ZSB5b3UuCgpjb25uZWN0aW9uID0gTm9uZQpkYiA9IE5vbmUKd2ViaG9zdCA9ICJsb2NhbGhvc3Q6ODA4MiIKbW9uZ29zdHIgPSAibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNyIKZGJfbmFtZSA9ICJibG9nIgoKIyB0aGlzIHNjcmlwdCB3aWxsIGNoZWNrIHRoYXQgaG9tZXdvcmsgNC4zCgojIGNvbW1hbmQgbGluZSBhcmcgcGFyc2luZyB0byBtYWtlIGZvbGtzIGhhcHB5IHdobyB3YW50IHRvIHJ1biBhdCBtb25nb2xhYnMgb3IgbW9uZ29ocQojIHRoaXMgZnVuY3Rpb25zIHVzZXMgZ2xvYmFsIHZhcnMgdG8gY29tbXVuaWNhdGUuIGZvcmdpdmUgbWUuCmRlZiBhcmdfcGFyc2luZyhhcmd2KToKCiAgICBnbG9iYWwgd2ViaG9zdAogICAgZ2xvYmFsIG1vbmdvc3RyCiAgICBnbG9iYWwgZGJfbmFtZQoKICAgIHRyeToKICAgICAgICBvcHRzLCBhcmdzID0gZ2V0b3B0LmdldG9wdChhcmd2LCAiLXA6LW06LWQ6IikKICAgIGV4Y2VwdCBnZXRvcHQuR2V0b3B0RXJyb3I6CiAgICAgICAgcHJpbnQgInVzYWdlIHZhbGlkYXRlLnB5IC1wIHdlYmhvc3QgLW0gbW9uZ29Db25uZWN0U3RyaW5nIC1kIGRhdGFiYXNlTmFtZSIKICAgICAgICBwcmludCAiXHRtb25nb0Nvbm5lY3Rpb25TdHJpbmcgZGVmYXVsdCB0byB7MH0iLmZvcm1hdChtb25nb3N0cikKICAgICAgICBwcmludCAiXHRkYXRhYmFzZU5hbWUgZGVmYXVsdHMgdG8gezB9Ii5mb3JtYXQoZGJfbmFtZSkKICAgICAgICBzeXMuZXhpdCgyKQogICAgZm9yIG9wdCwgYXJnIGluIG9wdHM6CiAgICAgICAgaWYgKG9wdCA9PSAnLWgnKToKICAgICAgICAgICAgcHJpbnQgInVzYWdlIHZhbGlkYXRlLnB5IC1tIG1vbmdvQ29ubmVjdFN0cmluZyAtZCBkYXRhYmFzZU5hbWUiCiAgICAgICAgICAgIHN5cy5leGl0KDIpCiAgICAgICAgZWxpZiBvcHQgaW4gKCItbSIpOgogICAgICAgICAgICBtb25nb3N0ciA9IGFyZwogICAgICAgICAgICBwcmludCAiT3ZlcnJpZGluZyBNb25nb0RCIGNvbm5lY3Rpb24gc3RyaW5nIHRvIGJlICIsIG1vbmdvc3RyCiAgICAgICAgZWxpZiBvcHQgaW4gKCItZCIpOgogICAgICAgICAgICBkYl9uYW1lID0gYXJnCiAgICAgICAgICAgIHByaW50ICJPdmVycmlkaW5nIE1vbmdvREIgZGF0YWJhc2UgdG8gYmUgIiwgZGJfbmFtZQoKIyBjaGVjayB0byBzZWUgaWYgdGhleSBsb2FkZWQgdGhlIGRhdGEgc2V0CmRlZiBjaGVja19mb3JfZGF0YV9pbnRlZ3JpdHkoKToKCiAgICBwb3N0cyA9IGRiLnBvc3RzCiAgICB0cnk6CiAgICAgICAgY291bnQgPSBwb3N0cy5jb3VudCgpCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgImNhbid0IHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IgogICAgICAgIHJhaXNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgKGNvdW50ICE9IDEwMDApOgogICAgICAgIHByaW50ICJUaGVyZSBhcmUgc3VwcG9zZWQgdG8gYmUgMTAwMCBkb2N1bWVudHMuIHlvdSBoYXZlICIsIGNvdW50CiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgIyBmaW5kIHRoZSBtb3N0IHBvcHVsYXIgdGFncwogICAgdHJ5OgoKICAgICAgICByZXN1bHQgPSBkYi5wb3N0cy5hZ2dyZWdhdGUoW3snJHByb2plY3QnOnsndGFncyc6MX19LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsnJHVud2luZCc6JyR0YWdzJ30sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyckZ3JvdXAnOnsnX2lkJzogJyR0YWdzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NvdW50Jzp7JyRzdW0nOjF9fX0sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyckc29ydCc6eydjb3VudCc6LTF9fSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7JyRsaW1pdCc6MTB9XSkKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCAiY2FuJ3QgcXVlcnkgTW9uZ29EQi4uaXMgaXQgcnVubmluZz8iCiAgICAgICAgcmFpc2UKICAgICAgICByZXR1cm4gRmFsc2UKCgogICAgaWYgKHJlc3VsdFsncmVzdWx0J11bMF1bJ2NvdW50J10gIT0gMTMgb3IKICAgICAgICByZXN1bHRbJ3Jlc3VsdCddWzBdWydfaWQnXSAhPSAiZWxib3ciKToKICAgICAgICBwcmludCAiVGhlIGRhdGFzZXQgaXMgbm90IHByb3Blcmx5IGxvYWRlZC4gVGhlIGRpc3RyaWJ1dGlvbiBvZiBwb3N0IHRhZ3MgaXMgd3JvbmcuIgogICAgICAgIHJldHVybiBGYWxzZQoKICAgIHByaW50ICJEYXRhIGxvb2tzIGxpa2UgaXQgaXMgcHJvcGVybHkgbG9hZGVkIGludG8gdGhlIHBvc3RzIGNvbGxlY3Rpb24iCgogICAgcmV0dXJuIFRydWUKICAgIAoKZGVmIGNoZWNrX2Zvcl9mYXN0X2Jsb2dfaG9tZV9wYWdlKCk6CgogICAgcG9zdHMgPSBkYi5wb3N0cwoKICAgIHRyeToKICAgICAgICBleHBsYWluID0gcG9zdHMuZmluZCgpLnNvcnQoJ2RhdGUnLCBkaXJlY3Rpb249LTEpLmxpbWl0KDEwKS5leHBsYWluKCkKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCAiY2FuJ3QgcXVlcnkgTW9uZ29EQi4uaXMgaXQgcnVubmluZz8iCiAgICAgICAgcmFpc2UKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBpZiAoZXhwbGFpblsnbnNjYW5uZWRPYmplY3RzJ10gPiAxMCk6CiAgICAgICAgcHJpbnQgIlNvcnJ5LCBleGVjdXRpbmcgdGhlIHF1ZXJ5IHRvIGRpc3BsYXkgdGhlIGhvbWUgcGFnZSBpcyB0b28gc2xvdy4gIgogICAgICAgIHByaW50ICJXZSBzaG91bGQgYmUgc2Nhbm5pbmcgbm8gbW9yZSB0aGFuIDEwIGRvY3VtZW50cy4gWW91IHNjYW5uZWQiLCBleHBsYWluWyduc2Nhbm5lZE9iamVjdHMnXQogICAgICAgIHByaW50ICJoZXJlIGlzIHRoZSBvdXRwdXQgZnJvbSBleHBsYWluIgoKICAgICAgICBwcCA9IHBwcmludC5QcmV0dHlQcmludGVyKGRlcHRoPTYpCiAgICAgICAgcHAucHByaW50KGV4cGxhaW4pCiAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAKICAgIHByaW50ICJIb21lIHBhZ2UgaXMgc3VwZXIgZmFzdC4gTmljZSBqb2IuXG4iCiAgICByZXR1cm4gVHJ1ZQoKZGVmIGdldF90aGVfbWlkZGxlX3Blcm1hbGluaygpOgogICAgcG9zdHMgPSBkYi5wb3N0cwogICAgdHJ5OgogICAgICAgIGMgPSBwb3N0cy5maW5kKCkuc2tpcCg1MDApLmxpbWl0KDEpCiAgICAgICAgZm9yIGRvYyBpbiBjOgogICAgICAgICAgICBwZXJtYWxpbmsgPSBkb2NbJ3Blcm1hbGluayddCiAgICAgICAgICAgIHJldHVybiBwZXJtYWxpbmsKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCAiY2FuJ3QgcXVlcnkgTW9uZ29EQi4uaXMgaXQgcnVubmluZz8iCiAgICAgICAgcmFpc2UKICAgIHJldHVybiAiIgoKZGVmIGNoZWNrX2Zvcl9mYXN0X2Jsb2dfZW50cnlfcGFnZSgpOgogICAgCiAgICBwb3N0cyA9IGRiLnBvc3RzCgogICAgcGVybWFsaW5rID0gZ2V0X3RoZV9taWRkbGVfcGVybWFsaW5rKCkKICAgIHRyeToKICAgICAgICBleHBsYWluID0gcG9zdHMuZmluZCh7J3Blcm1hbGluayc6cGVybWFsaW5rfSkuZXhwbGFpbigpCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgImNhbid0IHF1ZXJ5IE1vbmdvREIuLmlzIGl0IHJ1bm5pbmc/IgogICAgICAgIHJhaXNlCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgaWYgKGV4cGxhaW5bJ25zY2FubmVkT2JqZWN0cyddID4gMSk6CiAgICAgICAgcHJpbnQgIlNvcnJ5LCBleGVjdXRpbmcgdGhlIHF1ZXJ5IHRvIHJldHJpZXZlIGEgcG9zdCBieSBwZXJtYWxpbmsgaXMgdG9vIHNsb3cgIgogICAgICAgIHByaW50ICJXZSBzaG91bGQgYmUgc2Nhbm5pbmcgbm8gbW9yZSB0aGFuIDEgZG9jdW1lbnRzLiBZb3Ugc2Nhbm5lZCIsIGV4cGxhaW5bJ25zY2FubmVkT2JqZWN0cyddCiAgICAgICAgcHJpbnQgImhlcmUgaXMgdGhlIG91dHB1dCBmcm9tIGV4cGxhaW4iCgogICAgICAgIHBwID0gcHByaW50LlByZXR0eVByaW50ZXIoZGVwdGg9NikKICAgICAgICBwcC5wcHJpbnQoZXhwbGFpbikKICAgICAgICByZXR1cm4gRmFsc2UKICAgIAogICAgcHJpbnQgIkJsb2cgcmV0cmlldmFsIGJ5IHBlcm1hbGluayBpcyBzdXBlciBmYXN0LiBOaWNlIGpvYi5cbiIKICAgIHJldHVybiBUcnVlCgoKZGVmIGNoZWNrX2Zvcl9mYXN0X3Bvc3RzX2J5X3RhZ19wYWdlKCk6CiAgICBwb3N0cyA9IGRiLnBvc3RzCgogICAgdGFnID0gInNwaHlueCIKICAgIHRyeToKICAgICAgICBleHBsYWluID0gcG9zdHMuZmluZCh7J3RhZ3MnOnRhZ30pLnNvcnQoJ2RhdGUnLCBkaXJlY3Rpb249LTEpLmxpbWl0KDEwKS5leHBsYWluKCkKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCAiY2FuJ3QgcXVlcnkgTW9uZ29EQi4uaXMgaXQgcnVubmluZz8iCiAgICAgICAgcmFpc2UKICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBpZiAoZXhwbGFpblsnbnNjYW5uZWRPYmplY3RzJ10gPiAxMCk6CiAgICAgICAgcHJpbnQgIlNvcnJ5LCBleGVjdXRpbmcgdGhlIHF1ZXJ5IHRvIHJldHJpZXZlIHBvc3RzIGJ5IHRhZyBpcyB0b28gc2xvdy4iCiAgICAgICAgcHJpbnQgIldlIHNob3VsZCBiZSBzY2FubmluZyBubyBtb3JlIHRoYW4gMTAgZG9jdW1lbnRzLiBZb3Ugc2Nhbm5lZCIsIGV4cGxhaW5bJ25zY2FubmVkT2JqZWN0cyddCiAgICAgICAgcHJpbnQgImhlcmUgaXMgdGhlIG91dHB1dCBmcm9tIGV4cGxhaW4iCgogICAgICAgIHBwID0gcHByaW50LlByZXR0eVByaW50ZXIoZGVwdGg9NikKICAgICAgICBwcC5wcHJpbnQoZXhwbGFpbikKICAgICAgICByZXR1cm4gRmFsc2UKICAgIAogICAgcHJpbnQgIkJsb2cgcmV0cmlldmFsIGJ5IHRhZyBpcyBzdXBlciBmYXN0LiBOaWNlIGpvYi5cbiIKICAgIHJldHVybiBUcnVlCgoKIyBtYWluIHNlY3Rpb24gb2YgdGhlIGNvZGUKZGVmIG1haW4oYXJndik6CiAgICAgICAgICAgIAogICAgYXJnX3BhcnNpbmcoYXJndikKICAgIGdsb2JhbCBjb25uZWN0aW9uCiAgICBnbG9iYWwgZGIKCiAgICBwcmludCAiV2VsY29tZSB0byB0aGUgSFcgNC4zIENoZWNrZXIuIE15IGpvYiBpcyB0byBtYWtlIHN1cmUgeW91IGFkZGVkIHRoZSBpbmRleGVzIgogICAgcHJpbnQgInRoYXQgbWFrZSB0aGUgYmxvZyBmYXN0IGluIHRoZSBmb2xsb3dpbmcgdGhyZWUgc2l0dWF0aW9ucyIKICAgIHByaW50ICJcdFdoZW4gc2hvd2luZyB0aGUgaG9tZSBwYWdlIgogICAgcHJpbnQgIlx0V2hlbiBmZXRjaGluZyBhIHBhcnRpY3VsYXIgcG9zdCIKICAgIHByaW50ICJcdFdoZW4gc2hvd2luZyBhbGwgcG9zdHMgZm9yIGEgcGFydGljdWxhciB0YWciCgogICAgIyBjb25uZWN0IHRvIHRoZSBkYiAobW9uZ29zdHIgd2FzIHNldCBpbiBhcmdfcGFyc2luZykKICAgIHRyeToKICAgICAgICBjb25uZWN0aW9uID0gcHltb25nby5Db25uZWN0aW9uKG1vbmdvc3RyLCBzYWZlPVRydWUpCiAgICAgICAgZGIgPSBjb25uZWN0aW9uW2RiX25hbWVdCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQgImNhbid0IGNvbm5lY3QgdG8gTW9uZ29EQiB1c2luZyIsIG1vbmdvc3RyLCAiLiBJcyBpdCBydW5uaW5nPyIKICAgICAgICBzeXMuZXhpdCgxKQogICAgICAgIAogICAgaWYgKG5vdCBjaGVja19mb3JfZGF0YV9pbnRlZ3JpdHkoKSk6CiAgICAgICAgcHJpbnQgIlNvcnJ5LCB0aGUgZGF0YSBzZXQgaXMgbm90IGxvYWRlZCBjb3JyZWN0bHkgaW4gdGhlIHBvc3RzIGNvbGxlY3Rpb24iCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBpZiAobm90IGNoZWNrX2Zvcl9mYXN0X2Jsb2dfaG9tZV9wYWdlKCkpOgogICAgICAgIHByaW50ICJTb3JyeSwgdGhlIHF1ZXJ5IHRvIGRpc3BsYXkgdGhlIGJsb2cgaG9tZSBwYWdlIGlzIHRvbyBzbG93LiIKICAgICAgICBzeXMuZXhpdCgxKQoKICAgIGlmIChub3QgY2hlY2tfZm9yX2Zhc3RfYmxvZ19lbnRyeV9wYWdlKCkpOgogICAgICAgIHByaW50ICJTb3JyeSwgdGhlIHF1ZXJ5IHRvIHJldHJpZXZlIGEgYmxvZyBwb3N0IGJ5IHBlcm1hbGluayBpcyB0b28gc2xvdy4iCiAgICAgICAgc3lzLmV4aXQoMSkKCiAgICBpZiAobm90IGNoZWNrX2Zvcl9mYXN0X3Bvc3RzX2J5X3RhZ19wYWdlKCkpOgogICAgICAgIHByaW50ICJTb3JyeSwgdGhlIHF1ZXJ5IHRvIHJldHJpZXZlIGFsbCBwb3N0cyB3aXRoIGEgY2VydGFpbiB0YWcgaXMgdG9vIHNsb3ciCiAgICAgICAgc3lzLmV4aXQoMSkKICAgIAogICAgIyBpZiB5b3UgYXJlIHJlYWRpbmcgdGhpcyBpbiBjbGVhcnRleHQsIHlvdSBhcmUgdmlvbGF0aW5nIHRoZSBob25vciBjb2RlLgogICAgIyBZb3UgY2FuIHN0aWxsIHJlZGVlbSB5b3Vyc2VsZi4gR2V0IGl0IHdvcmtpbmcgYW5kIGRvbid0IHN1Ym1pdCB0aGUgdmFsaWRhdGlvbiBjb2RlIHVudGlsIHlvdSBkby4KICAgICMgQWxsIGEgbWFuIGhhcyBhdCB0aGUgZW5kIG9mIHRoZSBkYXkgaXMgaGlzIHdvcmQuCiAgICBwcmludCAiVGVzdHMgUGFzc2VkIGZvciBIVyA0LjMuIFlvdXIgSFcgNC4zIHZhbGlkYXRpb24gY29kZSBpcyAzNGY5anIyOXNoMjlmMjBmc3BsaW52IgoKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgbWFpbihzeXMuYXJndlsxOl0pCgoKCgoKCgo="
eval(compile(base64.b64decode(code), "<string>", 'exec'))
